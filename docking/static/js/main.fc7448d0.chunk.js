(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,i){e.exports=i(359)},357:function(e,t,i){},358:function(e,t,i){},359:function(e,t,i){"use strict";i.r(t);i(148),i(346);var n=i(5),r=i.n(n),a=i(142),s=i.n(a),c=(i(357),i(33)),o=i(49),h=i(145),l=i(143),d=i(146),u=i(70),f=i(72),v=10;function p(e){if(g.started)g.fireEvent(e,"Moving");else{var t=g.start,i=t.x,n=t.y;Math.abs(e.clientX-i)+Math.abs(e.clientY-n)>v&&(g.fireEvent(e,"Start"),g.started=!0)}}function w(e){window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",w),g.started&&(g.fireEvent(e,"Finish"),g.started=!1)}var g={ele:null,start:{x:0,y:0},started:!1,onDrag:null,fireEvent:function(e,t){this.onDrag&&this.onDrag(new m(this.ele,{x:e.clientX-this.start.x,y:e.clientY-this.start.y},t,e))},init:function(e,t,i){this.ele=e,this.started=!1,g.start.x=t.clientX,g.start.y=t.clientY,this.onDrag=i,window.addEventListener("mousemove",p),window.addEventListener("mouseup",w)}},m=function e(t,i,n,r){Object(c.a)(this,e),this.ele=t,this.change=i,this.type=n,this.mouseEvent=r};function y(e){var t=e.onDrag,i=e.style,n=e.children,a=r.a.createRef();return r.a.createElement("div",{className:"Drag",onMouseDown:function(e){g.init(a.current,e,t)},style:i,ref:a},n)}var x=i(71),b=i.n(x),k=i(144);var E=function(){function e(t,i){Object(c.a)(this,e),this.width=t,this.height=i,this.default=!0}return Object(o.a)(e,[{key:"read",value:function(e){var t=!1;return this.width===e.width&&this.height===e.height||(this.width=e.width,this.height=e.height,t=!0),this.default=!1,t}}]),e}(),z=function e(t,i){Object(c.a)(this,e),this.id=t,this.render=i,this.title="",this.weight=1,this._shouldSelect=!1,this.title=t},O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(c.a)(this,e),this.view=t,this.id="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),this.children=[],this.size=new E(100,100),this.parent=null,this.dir="horizontal"}return Object(o.a)(e,[{key:"findById",value:function(e){if(this.id==e)return this;var t=null;return this.children.some(function(i){return null!=(t=i.findById(e))}),t}},{key:"findByView",value:function(e){if(this.view==e)return this;var t=null;return this.children.some(function(i){return null!=(t=i.findByView(e))}),t}},{key:"sizeCSS",get:function(){return{width:this.size.width+"px",height:this.size.height+"px"}}},{key:"ancestors",get:function(){var e=this.parent;return e?[e].concat(Object(k.a)(this.parent.ancestors)):[]}},{key:"decendents",get:function(){var e=[this];return this.children.forEach(function(t){e=e.concat(t.decendents)}),e}},{key:"root",get:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"depth",get:function(){return this.ancestors.length}}]),Object(o.a)(e,[{key:"resetSize",value:function(){var e=this.weight;this.size.width=100*e,this.size.height=100*e,console.log(e)}},{key:"evolve",value:function(e){var t=this.clone();return t.children.forEach(function(e){return e.parent=t}),this.children.length=0,this.dir=e,this.addChild(t),this}},{key:"clone",value:function(){var t=new e;return t.dir=this.dir,this.children.forEach(function(e){return t.children.push(e)}),t.size.read(this.size),t}},{key:"addChild",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=this.children,r=this.isContainer,a=this.view;if(r){if(n.includes(t)){var s=n[i];return this.removeChild(t),void this.addChild(t,this.children.indexOf(s))}-1!=i?n.splice(i,0,t):n.push(t),t.parent&&t.parent.removeChild(t),t.parent=this}else this.view=null,this.addChild(new e(a)),this.addChild(t,i)}},{key:"removeChild",value:function(e){this.children.splice(this.children.indexOf(e),1),e.parent=null}},{key:"addView",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=new e(t);return this.addChild(n,i),n}},{key:"cleanup",value:function(){this.children.forEach(function(e){return e.cleanup()}),this.isContainer&&0==this.children.length&&this.parent&&this.parent.removeChild(this)}},{key:"weight",get:function(){var e=1;return(e=this.isContainer?this.children.reduce(function(e,t){return Math.max(e,t.weight)},e):this.view.weight)||1}},{key:"isContainer",get:function(){return null==this.view}},{key:"isTab",get:function(){return!!this.view||"tabs"==this.dir}},{key:"index",get:function(){return this.parent?this.parent.children.indexOf(this):-1}}]),e}();i(358);function C(){var e=r.a.useState(),t=Object(f.a)(e,2)[1];return function(){t(Math.random())}}function j(e){return null==e?null:e.classList.contains("Layout")?e:j(e.parentElement)}function S(e){var t=e.views,i=e.onDrop,a=null,s=Object(n.useState)(0),c=Object(f.a)(s,2),o=c[0],h=c[1],l=Math.max(Math.min(o,t.length-1),0),d=t.map(function(e,t){if(e._shouldSelect)return e._shouldSelect=!1,void h(t);return r.a.createElement("span",{key:t,onMouseDown:function(){o!==t&&h(t)},className:b()({selected:l==t})},r.a.createElement(y,{onDrag:function(t){var n=t.type,r=t.ele,s=t.mouseEvent,c=s.clientX,o=s.clientY;switch(n){case"Start":j(r).classList.add("dragging"),(a=r.cloneNode(!0)).classList.add("asDragShadow"),document.body.appendChild(a),a.style.left=c+10+"px",a.style.top=o+2+"px";break;case"Moving":a.style.left=c+10+"px",a.style.top=o+2+"px";break;case"Finish":var h=document.elementFromPoint(c,o).getAttribute("x-dropkey");a.parentNode.removeChild(a),j(r).classList.remove("dragging"),i(h,e)}}},e.title))}),u=t[l].render();return r.a.createElement("div",{className:"Tabs"},r.a.createElement("div",{className:"head"},d),r.a.createElement("div",{className:"body"},u))}function M(e){var t=e.model,i=e.update,n=t.isContainer,a=t.view,s=t.dir,c=t.children,o=C(),h=[];function l(e){var n=["width","height"].filter(function(t){return t!==e})[0],a=t.size[e],s=c.reduce(function(t,i){return t+i.size[e]},0),l=a/s,d=[0],f=0;c.forEach(function(s,v){var p=v==c.length-1,w=p?Math.floor(a-f):Math.round(s.size[e]*l);if(s.size[e]=w,s.size[n]=t.size[n],f+=w,h.push(r.a.createElement(M,{model:s,key:s.id,update:i})),!p){var g="width"==e?"left":"top",m={init:0,change:0};h.push(r.a.createElement(y,{key:"Drag_"+v,onDrag:function(t){var i=t.ele,n=t.change,r=t.type,a=20-w,s=c[v+1].size[e]-20;switch(r){case"Start":m.init=parseInt(i.style[g]),m.change=0,i.classList.add("moving");break;case"Moving":var h=n["width"==e?"x":"y"];m.change=Math.max(a,Math.min(h,s)),i.style[g]=m.init+m.change+"px";break;case"Finish":c[v].size[e]+=m.change,c[v+1].size[e]-=m.change,o(),i.classList.remove("moving")}},style:Object(u.a)({},g,f+"px")}))}d.push(f)})}if(t.isTab){var d=null==a?c.map(function(e){return e.view}):[a];h.push(r.a.createElement(S,{key:"tabs",views:d,onDrop:function(e,n){if(e&&n){var r=e.split("_")[0],a=t.root,s=a.findByView(n),c=a.findById(r),o=e.split("_")[1];if(s!=c){switch(o){case"centre":c.addChild(s),c.dir="tabs";break;case"top":h("vertical",!0);break;case"bottom":h("vertical",!1);break;case"left":h("horizontal",!0);break;case"right":h("horizontal",!1)}s.view._shouldSelect=!0,i(),window.r=s.root}}function h(e,t){var i=c.parent;if(c.isContainer&&c.dir==e)c.addChild(s,t?0:-1);else if(i&&i.dir==e){var n=c.index+(t?0:1);i.addChild(s,n)}else c.evolve(e).addChild(s,t?0:1);s.parent.children.forEach(function(e){return e.resetSize()})}}}))}else switch(s){case"horizontal":l("width");break;case"vertical":l("height")}var f="centre,top,bottom,left,right";t.isTab||("horizontal"==t.dir&&(f="centre,top,bottom"),"vertical"==t.dir&&(f="centre,left,right"));var v=f.split(",").map(function(e){var i,n={top:"bottom",bottom:"top",left:"right",right:"left"}[e],a=20*(t.depth+1);t.isTab&&(a=Math.max(a,.3*("left"==n||"right"==n?t.size.width:t.size.height)));var s=(i={},Object(u.a)(i,n,"calc(100% - ".concat(a,"px)")),Object(u.a)(i,"zIndex",10),i);"centre"==e&&(s.zIndex=t.depth);var c=t.id+"_"+e;return r.a.createElement("div",{key:"dzone_"+e,"x-dropkey":c,className:b()("dropZone",e),style:s})});return r.a.createElement("div",{style:t.sizeCSS,id:t.id,className:b()("Anchor",n?s:null)},h,v)}function D(e){var t=e.views,i=Object(n.useState)(null),a=Object(f.a)(i,2),s=a[0],c=a[1],o=C(),h=Object(n.useRef)();if(Object(n.useEffect)(function(){var e=h.current.getBoundingClientRect();0==e.height?setTimeout(o,100):s.size.read(e)&&o()}),Object(n.useEffect)(function(){s.decendents.forEach(function(e){return e.resetSize()})},[]),!s){var l=new O;l.addView(t[0]),l.addView(t[1]);var d=l.addView(t[2]);d.dir="vertical",d.addView(t[3]),d.addView(t[4]);var u=l.addView(t[5]);u.dir="tabs",u.addView(t[6]),u.addView(t[7]),c(l)}return r.a.createElement("div",{className:"SBlock Layout",ref:h},s&&!s.size.default?r.a.createElement(M,{model:s,update:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){s.cleanup(),o()})}):null)}var L=[];"0,1,2,3,4,5,6,7,8,9,10".split(",").forEach(function(e){var t=new z("view "+e,function(){return r.a.createElement("div",null,"view ",e)});"1"==e&&(t.weight=2),L.push(t)});var V=function(e){function t(){return Object(c.a)(this,t),Object(h.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(D,{views:L}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[147,1,2]]]);
//# sourceMappingURL=main.fc7448d0.chunk.js.map